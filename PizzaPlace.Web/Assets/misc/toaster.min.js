(function(){"use strict";angular.module("toaster",[]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"close-html":'<button class="toast-close-button" type="button">&times;<\/button>',"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-bottom-left","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":!1,"mouseover-timer-stop":!0}).service("toaster",["$rootScope","toasterConfig",function(n,t){function u(n){return function(t,i,r,u,f,e,o,s,h){return angular.isString(t)?this.pop(n,t,i,r,u,f,e,o,s,h):this.pop(angular.extend(t,{type:n}))}}var r=function(){var n={};return n.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})},n}(),i;this.pop=function(t,i,u,f,e,o,s,h,c,l){if(angular.isObject(t)){var a=t;this.toast={type:a.type,title:a.title,body:a.body,timeout:a.timeout,bodyOutputType:a.bodyOutputType,clickHandler:a.clickHandler,showCloseButton:a.showCloseButton,closeHtml:a.closeHtml,toastId:a.toastId,onShowCallback:a.onShowCallback,onHideCallback:a.onHideCallback,directiveData:a.directiveData};s=a.toasterId}else this.toast={type:t,title:i,body:u,timeout:f,bodyOutputType:e,clickHandler:o,showCloseButton:h,toastId:c,onHideCallback:l};return this.toast.toastId&&this.toast.toastId.length||(this.toast.toastId=r.newGuid()),n.$emit("toaster-newToast",s,this.toast.toastId),{toasterId:s,toastId:this.toast.toastId}};this.clear=function(t,i){angular.isObject(t)?n.$emit("toaster-clearToasts",t.toasterId,t.toastId):n.$emit("toaster-clearToasts",t,i)};for(i in t["icon-classes"])this[i]=u(i)}]).factory("toasterEventRegistry",["$rootScope",function(n){var u=null,f=null,t=[],i=[],r;return r={setup:function(){u||(u=n.$on("toaster-newToast",function(n,i,r){for(var u=0,f=t.length;u<f;u++)t[u](n,i,r)}));f||(f=n.$on("toaster-clearToasts",function(n,t,r){for(var u=0,f=i.length;u<f;u++)i[u](n,t,r)}))},subscribeToNewToastEvent:function(n){t.push(n)},subscribeToClearToastsEvent:function(n){i.push(n)},unsubscribeToNewToastEvent:function(n){var i=t.indexOf(n);i>=0&&t.splice(i,1);t.length===0&&(u(),u=null)},unsubscribeToClearToastsEvent:function(n){var t=i.indexOf(n);t>=0&&i.splice(t,1);i.length===0&&(f(),f=null)}},{setup:r.setup,subscribeToNewToastEvent:r.subscribeToNewToastEvent,subscribeToClearToastsEvent:r.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:r.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:r.unsubscribeToClearToastsEvent}}]).directive("directiveTemplate",["$compile","$injector",function(n,t){return{restrict:"A",scope:{directiveName:"@directiveName",directiveData:"@directiveData"},replace:!0,link:function(i,r,u){i.$watch("directiveName",function(f){var o,e,s;if(angular.isUndefined(f)||f.length<=0)throw new Error("A valid directive name must be provided via the toast body argument when using bodyOutputType: directive");try{o=t.get(u.$normalize(f)+"Directive")}catch(h){throw new Error(f+" could not be found. The name should appear as it exists in the markup, not camelCased as it would appear in the directive declaration, e.g. directive-name not directiveName.");}if(e=o[0],e.scope!==!0&&e.scope)throw new Error("Cannot use a directive with an isolated scope. The scope must be either true or falsy (e.g. false/null/undefined). Occurred for directive "+f+".");if(e.restrict.indexOf("A")<0)throw new Error('Directives must be usable as attributes. Add "A" to the restrict option (or remove the option entirely). Occurred for directive '+f+".");i.directiveData&&(i.directiveData=angular.fromJson(i.directiveData));s=n("<div "+f+"><\/div>")(i);r.append(s)})}}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function(n,t,i,r,u,f,e){return{replace:!0,restrict:"EA",scope:!0,link:function(t,o,s){function a(n,r){n.timeoutPromise=i(function(){t.removeToast(n.toastId)},r,1)}function v(i,u){var e,l,s,f,o,a,c;if(i.type=h["icon-classes"][i.type],i.type||(i.type=h["icon-class"]),h["prevent-duplicates"]===!0&&t.toasters.length){if(t.toasters[t.toasters.length-1].body===i.body)return;for(s=!1,e=0,l=t.toasters.length;e<l;e++)if(t.toasters[e].toastId===u){s=!0;break}if(s)return}f=h["close-button"];typeof i.showCloseButton=="boolean"||(typeof f=="boolean"?i.showCloseButton=f:typeof f=="object"?(o=f[i.type],typeof o!="undefined"&&o!==null&&(i.showCloseButton=o)):i.showCloseButton=!1);i.showCloseButton&&(i.closeHtml=r.trustAsHtml(i.closeHtml||t.config.closeHtml));i.bodyOutputType=i.bodyOutputType||h["body-output-type"];switch(i.bodyOutputType){case"trustedHtml":i.html=r.trustAsHtml(i.body);break;case"template":i.bodyTemplate=i.body||h["body-template"];break;case"templateWithData":a=n(i.body||h["body-template"]);c=a(t);i.bodyTemplate=c.template;i.data=c.data;break;case"directive":i.html=i.body}t.configureTimer(i);h["newest-on-top"]===!0?(t.toasters.unshift(i),h.limit>0&&t.toasters.length>h.limit&&t.toasters.pop()):(t.toasters.push(i),h.limit>0&&t.toasters.length>h.limit&&t.toasters.shift());angular.isFunction(i.onShowCallback)&&i.onShowCallback()}function l(n){var r=t.toasters[n];r.timeoutPromise&&i.cancel(r.timeoutPromise);t.toasters.splice(n,1);angular.isFunction(r.onHideCallback)&&r.onHideCallback()}function y(n){for(var i=t.toasters.length-1;i>=0;i--)c(n)?l(i):t.toasters[i].toastId==n&&l(i)}function c(n){return angular.isUndefined(n)||n===null}var h;h=angular.extend({},u,t.$eval(s.toasterOptions));t.config={toasterId:h["toaster-id"],position:h["position-class"],title:h["title-class"],message:h["message-class"],tap:h["tap-to-dismiss"],closeButton:h["close-button"],closeHtml:h["close-html"],animation:h["animation-class"],mouseoverTimer:h["mouseover-timer-stop"]};t.$on("$destroy",function(){e.unsubscribeToNewToastEvent(t._onNewToast);e.unsubscribeToClearToastsEvent(t._onClearToasts)});t.configureTimer=function(n){var t=angular.isNumber(n.timeout)?n.timeout:h["time-out"];typeof t=="object"&&(t=t[n.type]);t>0&&a(n,t)};t.removeToast=function(n){for(var i=0,r=t.toasters.length;i<r;i++)if(t.toasters[i].toastId===n){l(i);break}};t.toasters=[];t._onNewToast=function(n,i,r){(c(t.config.toasterId)&&c(i)||!c(t.config.toasterId)&&!c(i)&&t.config.toasterId==i)&&v(f.toast,r)};t._onClearToasts=function(n,i,r){(i=="*"||c(t.config.toasterId)&&c(i)||!c(t.config.toasterId)&&!c(i)&&t.config.toasterId==i)&&y(r)};e.setup();e.subscribeToNewToastEvent(t._onNewToast);e.subscribeToClearToastsEvent(t._onClearToasts)},controller:["$scope","$element","$attrs",function(n){n.stopTimer=function(t){n.config.mouseoverTimer===!0&&t.timeoutPromise&&(i.cancel(t.timeoutPromise),t.timeoutPromise=null)};n.restartTimer=function(t){n.config.mouseoverTimer===!0?t.timeoutPromise||n.configureTimer(t):t.timeoutPromise===null&&n.removeToast(t.toastId)};n.click=function(t,i){if(n.config.tap===!0||t.showCloseButton===!0&&i===!0){var r=!0;t.clickHandler&&(angular.isFunction(t.clickHandler)?r=t.clickHandler(t,i):angular.isFunction(n.$parent.$eval(t.clickHandler))?r=n.$parent.$eval(t.clickHandler)(t,i):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container."));r&&n.removeToast(t.toastId)}}}],template:'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><div ng-if="toaster.showCloseButton" ng-click="click(toaster, true)" ng-bind-html="toaster.closeHtml"><\/div><div ng-class="config.title">{{toaster.title}}<\/div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"><\/div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"><\/div><\/div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"><\/div><\/div><div ng-switch-when="directive"><div directive-template directive-name="{{toaster.html}}" directive-data="{{toaster.directiveData}}"><\/div><\/div><div ng-switch-default >{{toaster.body}}<\/div><\/div><\/div><\/div>'}}])})(window,document);
//# sourceMappingURL=toaster.min.js.map
